<BOUCLE_principale(ARTICLES){id_article}>

<!-- calcule le nombre de photos jointes sous forme de document -->
<B_nb_images>
<BOUCLE_nb_images(DOCUMENTS){id_article}{extension==jpg|png|gif}{mode=document}>
</BOUCLE_nb_images>
    <?php $nb_images = "#TOTAL_BOUCLE"; ?>

<!-- liens de pagination pour passer d'une image à l'autre -->
       <?php paginationImage(#ID_ARTICLE, $nb_images); ?>

<!-- affiche l'image dont le rang est indiqué par le paramètre debut_image -->
<a name=photo ></a>
<BOUCLE_photo(DOCUMENTS){id_article}{par titre}{extension==jpg|png|gif}{mode=document}{debut_image,1}>
    <!--<div class="album-photo">-->
    	
    	<img name="photo" src="#URL_DOCUMENT" width="#LARGEUR" height="#HAUTEUR" border="0" />
		<br>
    <!--</div>-->
		[<h2>(#TITRE)<h2>]
        <dl class="album-photo-legende">
            <p>[<dd>(#DESCRIPTIF)</dd>]</p>
	    </dl>
</BOUCLE_photo>

</B_nb_images>
aucune image
<//B_nb_images>

</BOUCLE_principale>


<?php 
function paginationImage($id_article, $nb_images) {
    // affiche des liens permettant d'afficher les images précédente et suivante
    if ($nb_images > 1) {
        $debut_image = $_GET["debut_image"];
        if ($debut_image > 0) {
            lienPage($id_article, ($debut_image-1), "image précédente", "<-");
        }
	$num = $debut_image +1;
        echo ' Image '.$num.' / '.$nb_images.' ';
        if ($debut_image < $nb_images-1) 
            lienPage($id_article, ($debut_image+1), "image suivante", "suiv->");
    }
}

function lienPage($id_article, $image, $titre, $texte) {
    // affiche un lien avec les paramètres en argument
    echo "<a href='article.php3?id_article=$id_article&debut_image=$image";
	echo "#photo' title='" . htmlentities($titre, ENT_QUOTES) . "'>$texte</a>";
}    
?>
