<BOUCLE_principale(ARTICLES){id_article}>

<?php define("VIGNETTES_PAGE", 4); ?>

<B_nb_images>
<BOUCLE_nb_images(DOCUMENTS){id_article}{extension==jpg|png|gif}{mode=document}>
</BOUCLE_nb_images>
<?php $nb_images = "#TOTAL_BOUCLE"; ?>


<br>#TITRE<br>



<!-- affiche un lot de vignettes dont le rang de la 1ère est indiqué par debut_vignette -->
<!--<center>-->
<table cellpadding="0" cellspacing="5" border="0" >
<tbody>
<tr>
<td style="vertical-align: center" > <?php flecheGauche(#ID_ARTICLE, $nb_images); ?> </td>
<td style="vertical-align: top;">
<!--<center>-->
    <B_vignettes>
        <?php 
            $debut_vignette = isset($_GET["debut_vignette"]) ? $_GET["debut_vignette"] : 0; 
            $id_vignette = $debut_vignette;
        ?>
    <BOUCLE_vignettes(DOCUMENTS){id_article}{extension==jpg|png|gif}{mode=document}{debut_vignette,4}>
        <?php 
            lienPage(#ID_ARTICLE, $debut_vignette, $id_vignette, "agrandir l'image", "#LOGO_DOCUMENT"); 
            $id_vignette++; 
        ?>
    
    </BOUCLE_vignettes>
    </B_vignettes>
<!--</center>-->
</td>
<td style="vertical-align: center;"> <?php flecheDroite(#ID_ARTICLE, $nb_images); ?> </td>
</tr>
</tbody>
</table>
<!--</center>-->


<!-- affichage de la photo  -->
<div id="album-photo">
    <BOUCLE_photo(DOCUMENTS){id_article}{extension==jpg|png|gif}{mode=document}{debut_image,1}>
    
     <img src=#URL_DOCUMENT /> 
        <!-- affichage de la légende (titre et descriptif) de la photo -->
		[<h1>(#TITRE)</h1>]
        <dl class="album-photo-legende">
            <p>[<dd>(#DESCRIPTIF)</dd>]</p>
        </dl>
    </BOUCLE_photo>
</div>

</B_nb_images>
aucune image
<//B_nb_images>

</BOUCLE_principale>

<?php 
function lienPage($id_article, $vignette, $image, $titre, $texte) {
    // affiche un lien avec les paramètres en argument
    $cas=$_GET["type_album"];
    echo "<a href='article.php3?id_article=$id_article&type_album=$cas";
    echo "&debut_vignette=$vignette&debut_image=$image'";
    echo " title='" . htmlentities($titre, ENT_QUOTES) . "'>$texte</a>";
}    

function flecheGauche($id_article, $nb_images) {
    // affiche des liens permettant d'afficher les vignettes précédentes et suivantes par lot de 10
    if ($nb_images > VIGNETTES_PAGE) {
        $debut_vignette = $_GET["debut_vignette"];
        if ($debut_vignette >= VIGNETTES_PAGE) 
            lienPage($id_article, ($debut_vignette-VIGNETTES_PAGE), ($debut_vignette-VIGNETTES_PAGE), "vignettes précédentes", "prec");
    }
}

function flecheDroite($id_article, $nb_images) {
    // affiche des liens permettant d'afficher les vignettes précédentes et suivantes par lot de 10
    if ($nb_images > VIGNETTES_PAGE) {
        $debut_vignette = $_GET["debut_vignette"];
        if ($debut_vignette < $nb_images-VIGNETTES_PAGE) 
            lienPage($id_article, ($debut_vignette+VIGNETTES_PAGE), ($debut_vignette+VIGNETTES_PAGE), "vignettes suivantes", "suiv");
    }
}

?>
